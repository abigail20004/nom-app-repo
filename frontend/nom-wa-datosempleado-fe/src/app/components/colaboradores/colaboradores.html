<div class="container">
  <h2>Aplicación de Gestión de Colaboradores</h2>

  <div class="botonera">
    <button (click)="cargarColaboradores()">Cargar colaboradores</button>
    <button (click)="toggleFormulario()">+</button>
  </div>

  <!-- Solo mostrar si está activo -->
  <ng-container *ngIf="mostrarFormulario">

    <div class="formulario-agregar">
      <button class="cerrar" (click)="toggleFormulario()">✖</button>

   <form (ngSubmit)="agregarColaborador()" #colForm="ngForm">
  <!-- Nombre -->
  <input
    [(ngModel)]="nuevoColaborador.nombre"
    name="nombre"
    placeholder="Nombre"
    required
    #nombre="ngModel"
    [ngClass]="{ 'invalido': nombre.invalid && nombre.touched }"
  />
  <div *ngIf="nombre.invalid && nombre.touched" class="error">
    El nombre es requerido.
  </div>

  <!-- Apellido -->
  <input
    [(ngModel)]="nuevoColaborador.apellido"
    name="apellido"
    placeholder="Apellido"
    required
    #apellido="ngModel"
    [ngClass]="{ 'invalido': apellido.invalid && apellido.touched }"
  />
  <div *ngIf="apellido.invalid && apellido.touched" class="error">
    El apellido es requerido.
  </div>

  <!-- Dirección -->
  <input
    [(ngModel)]="nuevoColaborador.direccion"
    name="direccion"
    placeholder="Dirección"
  />

  <!-- Edad -->
  <input
    [(ngModel)]="nuevoColaborador.edad"
    name="edad"
    type="number"
    placeholder="Edad"
    min="1"
    #edad="ngModel"
    [ngClass]="{ 'invalido': edad.invalid && edad.touched }"
  />
  <div *ngIf="edad.invalid && edad.touched" class="error">
    Edad inválida (debe ser mayor a 0).
  </div>

  <!-- Profesión -->
  <input
    [(ngModel)]="nuevoColaborador.profesion"
    name="profesion"
    placeholder="Profesión"
  />

  <!-- Estado Civil -->
  <input
    [(ngModel)]="nuevoColaborador.estado_civil"
    name="estado_civil"
    placeholder="Estado civil"
  />

  <button type="submit" [disabled]="colForm.invalid">Guardar</button>
</form>

    </div>
  </ng-container>

  <!-- Tabla -->
  <table *ngIf="colaboradores.length > 0" border="1" cellpadding="10" style="margin-top: 20px;">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Edad</th>
        <th>Dirección</th>
        <th>Profesión</th>
        <th>Estado Civil</th>
        <th>Riesgo</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let col of colaboradores">
        <td>{{ col.nombre }}</td>
        <td>{{ col.apellido }}</td>
        <td>{{ col.edad }}</td>
        <td>{{ col.direccion }}</td>
        <td>{{ col.profesion }}</td>
        <td>{{ col.estado_civil }}</td>
        <td>
          <button (click)="mostrarAlerta(nivelRiesgo(col.edad))">
            Nivel Riesgo
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
